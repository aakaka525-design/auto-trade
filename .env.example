# ===================
# AI Provider 配置
# ===================
AI_PROVIDER=openai  # openai | anthropic | custom
AI_API_KEY=sk-your-api-key-here
AI_API_BASE_URL=https://api.openai.com/v1
AI_MODEL=gpt-4o
AI_MAX_TOKENS=1024
AI_TEMPERATURE=0.3

# ===================
# Lighter 交易所配置
# ===================
# 主网: https://mainnet.zklighter.elliot.ai
# 测试网: https://testnet.zklighter.elliot.ai
LIGHTER_BASE_URL=https://testnet.zklighter.elliot.ai

# API 私钥 (hex 格式)
# 可通过 lighter.SignerClient.create_api_key() 生成
# 或从 Lighter 控制台获取
LIGHTER_API_PRIVATE_KEY=your-api-private-key-hex

# 账户索引
# 通过 accountsByL1Address API 获取你的账户索引
# 例如调用: GET /api/v1/accountsByL1Address?l1_address=0x...
LIGHTER_ACCOUNT_INDEX=12345

# API 密钥索引 (3-254 可用)
# 0=桌面端, 1=移动网页, 2=移动App (保留)
LIGHTER_API_KEY_INDEX=3

# ETH 私钥 (可选，仅用于 change_api_key 等需要 L1 签名的操作)
LIGHTER_ETH_PRIVATE_KEY=

# ===================
# 交易所选择
# ===================
# 交易执行使用的交易所: lighter | binance
ACTIVE_EXCHANGE=lighter

# 监控的交易所列表 (逗号分隔)
# 可同时监控多个交易所: "lighter,binance"
MONITOR_EXCHANGES=lighter,binance

# ===================
# Binance 交易所配置
# ===================
# API Key (从 Binance 控制台获取)
# https://www.binance.com/en/my/settings/api-management
BINANCE_API_KEY=
# 签名方式: HMAC | Ed25519
# HMAC: 传统方式，需要 API_SECRET
# Ed25519: 更安全，需要自生成密钥对 (推荐)
BINANCE_SIGN_TYPE=Ed25519

# HMAC 签名 - API Secret (仅 SIGN_TYPE=HMAC 时需要)
BINANCE_API_SECRET=your-binance-api-secret

# Ed25519 签名 - 私钥 (仅 SIGN_TYPE=Ed25519 时需要)
# 生成密钥对: python -c "from connectors.binance.auth import generate_ed25519_keypair; priv, pub = generate_ed25519_keypair(); print('=== PRIVATE KEY (保存到 .env) ==='); print(priv); print('=== PUBLIC KEY (复制到 Binance) ==='); print(pub)"
# 将公钥复制到 Binance API 管理页面创建 API Key
BINANCE_PRIVATE_KEY=
# 是否使用测试网
# Testnet: https://testnet.binance.vision
BINANCE_TESTNET=false


# ===================
# 交易配置
# ===================
# 交易对格式: BASE-QUOTE (如 ETH-USDC, BTC-USDT)
# 系统会自动转换: ETH-USDC -> Binance 自动变成 ETHUSDT
#                ETH-USDT -> Lighter 自动变成 ETH-USDC
TRADING_SYMBOL=ETH-USDC
# 市场索引: 0=ETH永续, 2048=ETH现货
TRADING_MARKET_INDEX=0
ANALYSIS_INTERVAL_SECONDS=300

# ===================
# 风控配置
# ===================
MAX_POSITION_SIZE_USDC=1000
MAX_LOSS_PER_TRADE_PCT=2.0
MAX_DAILY_LOSS_PCT=5.0
MIN_CONFIDENCE_THRESHOLD=0.6

# ===================
# 代理配置 (可选)
# ===================
# 解决 403 地域限制
# 格式: http://127.0.0.1:7890 或 socks5://127.0.0.1:1080
HTTP_PROXY=http://用户名:密码@代理IP:端口
HTTPS_PROXY=http://用户名:密码@代理IP:端口

# ===================
# Telegram 警报 (可选)
# ===================
# 获取 Bot Token: 在 Telegram 搜索 @BotFather
# 获取 Chat ID: 访问 https://api.telegram.org/bot<TOKEN>/getUpdates
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ===================
# 大单监控 - Lighter
# ===================
# 主流币种 (BTC, ETH, SOL 等) 大单阈值
LARGE_ORDER_MIN_VALUE_MAJOR=1000000.0
# 其他币种大单阈值 (可设置更低)
LARGE_ORDER_MIN_VALUE_OTHER=100000.0
# 主流币种列表 (market_id)
MAJOR_MARKET_IDS=0,1,2,7,8,9,25

# ===================
# 大单监控 - Binance (VWAP 滑点检测 + 分级告警)
# ===================
# 分级滑点阈值:
# - LOW: 普通大单 (日志记录)
# - MEDIUM: 中等冲击 (推送到普通 Bot)
# - HIGH: 极端行情 (推送到紧急 Bot)
SLIPPAGE_THRESHOLD_LOW=0.5        # 0.5% 触发 LOW
SLIPPAGE_THRESHOLD_MED=2.0        # 2.0% 触发 MEDIUM
SLIPPAGE_THRESHOLD_HIGH=10.0      # 10% 触发 HIGH

# (旧配置兼容) 如果只想用单一阈值，可以只设置这个
# SLIPPAGE_THRESHOLD=10

# 最低金额阈值 (低于此值不计算滑点)
MIN_ORDER_VALUE_SPOT=50000
MIN_ORDER_VALUE_FUTURES=20000

# 订单簿缓存档位数 (用于滑点模拟)
ORDERBOOK_DEPTH=50

# 剔除前 N 档 (减少虚单干扰)
SKIP_TOP_LEVELS=1

# ===================
# Telegram 分级通知
# ===================
# 普通 Bot (LOW/MEDIUM 级别)
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# 紧急 Bot (HIGH 级别 - 极端行情专用)
# 如果不设置，则使用普通 Bot
TELEGRAM_URGENT_BOT_TOKEN=
TELEGRAM_URGENT_CHAT_ID=

# ===================
# Binance 监控开关
# ===================
# 是否监控合约 (true/false)
BINANCE_MONITOR_FUTURES=true
# 是否监控现货 (true/false)
BINANCE_MONITOR_SPOT=true


# ===================
# 价格异常监控
# ===================
# 价格拉升阈值 (百分比, 正数)
PRICE_PUMP_THRESHOLD=10.0
# 价格暴跌阈值 (百分比, 负数)
PRICE_DUMP_THRESHOLD=-10.0
# 价格监控时间窗口 (秒)
PRICE_TIME_WINDOW=60
# 价格警报冷却时间 (秒)
PRICE_COOLDOWN=120
